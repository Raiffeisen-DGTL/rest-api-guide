# API Best Practices 

- [API Best Practices](#api-best-practices)
    - [Введение](#введение)
    - [Общие рекомендации](#общие-рекомендации)
    - [Именование ресурсов](#именование-ресурсов)
      - [Использование kebab-case для пути](#использование-kebab-case-для-пути)
        - [Описание правила](#описание-правила)
        - [Обоснование](#обоснование)
      - [Избегать избыточных префиксов в пути](#избегать-избыточных-префиксов-в-пути)
        - [Описание правила](#описание-правила-1)
        - [Обоснование](#обоснование-1)
      - [Используем для именования параметров запроса camelCase](#используем-для-именования-параметров-запроса-camelcase)
        - [Описание правила](#описание-правила-2)
        - [Обоснование](#обоснование-2)


### Введение

Данный гайд содержит основные принципы и правила, которым мы следуем при разработке REST API в Райффайзен Банке. 
Правила разделены по тематическим разделам.
У каждого правила есть:

- *ID* - уникальный идентификатор правила
- *Severity* - индикатор, является ли правило обязательным(MUST) или рекомендацией(RECOMMENDATION)
- *Дата принятия* - когда это правило было добавлено в гайд

### Общие рекомендации

REST ([Representational State Transfer](https://en.wikipedia.org/wiki/Representational_state_transfer)) - это архитектурная абстракция, которая описывает взаимодействией компонентов в распределенной системе. REST широко используется для создания web API (*RESTful web API*), которое использует протокол HTTP как транспорт.

В RESTful web API обращение к ресурсу происходит по уникальному идентификатору (*URL*), с указанием действия над ресурсом (*HTTP method*), в запросе может передаваться тело запроса (*body*) и дополнительные заголовки (*HTTP header fields*). В ответ на запрос, ресурс возвращает код ответа (*HTTP status code*) и **может** возвращаться тело ответа.

В качество формата тела запроса/ответа рекомендуется использовать только JSON. Использование других форматов (XML/TXT) возможно в исключительных случаях.

Мы ориентируемся на [Richardson Maturity Model](https://martinfowler.com/articles/richardsonMaturityModel.html), но считаем избыточным Level 3


---

### Именование ресурсов

#### Использование kebab-case для пути 

| ID              | Severity | Дата принятия |
|-----------------|----------|---------------|
| path-kebab-case | MUST     | 27.02.2025    |

##### Описание правила

Пути API должны использовать kebab-case (строчные буквы с разделением дефисами) для наименования.

Правильно:
```
/v1/statements
/v1/payment-orders/
```
Неправильно:
```
/v1/paymentOrders    // camelCase
/v1/PaymentOrders    // PascalCase
/v1/payment_orders   // snake_case

```
##### Обоснование

Использование kebab-case обеспечивает единообразие API и соответствует лучшим практикам именования ресурсов в REST API. 
Чтобы ваши URI было легче сканировать и интерпретировать, используйте символ дефиса (-), чтобы улучшить читаемость имен в сегментах длинных путей.

Были рассмотрены альтернативные стили именования:
- camelCase - отклонён из-за проблем с регистро-зависимостью в некоторых системах
- snake_case - отклонён для сохранения единообразия
- PascalCase - отклонён из-за проблем с читаемостью URL

---

#### Избегать избыточных префиксов в пути

| ID                         | Severity | Дата принятия |
|----------------------------|----------|---------------|
| path-no-redundant-prefixes | MUST     | 27.02.2025    |


##### Описание правила

Не следует использовать избыточные термины, не относящиеся к смыслу ресурса/команды, такие как:
- `api`
- `openapi`
- `http`
- `service`

Правильно:
```
/v1/statements
/v1/statements/export

```

Неправильно:
```
/api/v1/statements
/v1/http/statements
/v1/statement-service/export

```

##### Обоснование

Избыточные префиксы увеличивают длину URL без добавления смысловой нагрузки, усложняют чтение и понимание API.

При публикации для внешних клиентов на `api.raiffeisen.ru` дополнительный префикс `api` будет создавать избыточность. 

---

#### Используем для именования параметров запроса camelCase

| ID                      | Severity | Дата принятия |
|-------------------------|----------|---------------|
| query-params-camel-case | MUST     | 27.02.2025    |


##### Описание правила

Используем для именования параметров [camelCase](https://en.wiktionary.org/wiki/CamelCase). 


Правильно:
```
/v1/statements?requestId={requestId}
```

Неправильно:
```
/v1/statements?request_id={requestId}
/v1/statements?RequestId={requestId}
```

##### Обоснование

Самым популярным решением для query params в банке является `camelCase`, именно поэтому выбран стандартным способом именования.
