# Процесс версионирования API Guide

## Общая информация

API Guide использует семантическое версионирование ([SemVer](https://semver.org/)) для управления версиями. Версии устанавливаются в виде тегов в интерфейсе GitLab.

Версия устанавливается на весь API Guide, а также на Spectral ruleset, которые используются для автоматических проверок.

Каждый выпуск API Guide включает в себя:
* Новую версию репозитория API Guide. Можно переключаться между версиями по тегам
* Новую версию rulesets в директории `/spectral`
* Новую версию npm пакета `@rapi/spectral-rulesets`, который содержит rulesets

## Выпуск новой версии API Guide

При создании нового тега в репозитории запускается CI/CD пайплайн, который:
1. Собирает Spectral правила из директории `spectral/`
2. Формирует файлы `*-ruleset.yaml` из этих правил
3. Упаковывает файлы `*-ruleset.yaml` и директорию `functions` в npm пакет
4. Публикует npm пакет в Artifactory
5. Данный npm пакет можно подключать в проекты, использующие Spectral

## Стратегия выпуска версий

Для минимизации частых изменений в API Guide:
- Все изменения агрегируются в ветке `master`
- Новые версии выпускаются не чаще одного раза в месяц
- Выпуски производятся только при значительных изменениях или обновлениях

## Порядок действий для выпуска новой версии

1. Агрегируйте все необходимые изменения в ветку `master`
2. Убедитесь, что все тесты проходят успешно
3. Создайте новый тег в формате SemVer соблюдая порядок нумерации от предыдущего тега (например, `0.5.0`) в интерфейсе Gitlab
4. CI/CD пайплайн автоматически обработает тег и опубликует обновленные Spectral правила
5. Дальнейшая работа с API Guide может осуществляться в нужной версии, используя соответствующий тег