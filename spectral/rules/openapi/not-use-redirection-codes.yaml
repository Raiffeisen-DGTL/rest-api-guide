x-rulesets: [ base ]
rules:
  not-use-redirection-codes:
    description: Не используйте коды перенаправления в responses
    documentationUrl: https://gitlabci.raiffeisen.ru/cib/api-guide/-/tree/master/spectral/rules/openapi?ref_type=heads#not-use-redirection-codes
    severity: error
    given:
      - '$.paths.*.*.responses.*~'
      - '$.paths.*.responses.*~'
      - '$.webhooks.*.*.responses.*~'
    then:
      function: pattern
      functionOptions:
        notMatch: '^3(?!04$)(?:\d{2}|XX)$'