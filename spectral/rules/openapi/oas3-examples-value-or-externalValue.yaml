x-rulesets: [ base, documentation, ai-ready ]
rules:
  oas3-examples-value-or-externalValue:
    description: Examples должен содержать value или externalValue
    documentationUrl: https://gitlabci.raiffeisen.ru/cib/api-guide/-/tree/master/spectral/rules/openapi?ref_type=heads#oas3-examples-value-or-externalValue
    severity: warn
    formats: [oas3]
    given:
      - '$.components.examples[*]'
      - '$.paths[*][*]..content[*].examples[*]'
      - '$.paths[*][*]..parameters[*].examples[*]'
      - '$.components.parameters[*].examples[*]'
      - '$.paths[*][*]..headers[*].examples[*]'
      - '$.components.headers[*].examples[*]'
    then:
      function: xor
      functionOptions:
        properties: ['externalValue', 'value']