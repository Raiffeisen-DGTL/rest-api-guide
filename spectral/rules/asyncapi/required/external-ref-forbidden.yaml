rules:
  external-ref-forbidden:
    description: "Все $ref должны ссылаться на components"
    documentationUrl: https://gitlabci.raiffeisen.ru/cib/api-guide/-/tree/master/spectral/rules/asyncapi?ref_type=heads#external-ref-forbidden
    message: Найдена ссылка на внешний компонент {{value}}
    severity: error
    given: "$..$ref"
    resolved: false
    then:
      function: pattern
      functionOptions:
        match: "^#/components"