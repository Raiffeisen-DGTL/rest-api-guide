# AUTOGENERATED - DO NOT EDIT THIS FILE MANUALLY
documentationUrl: https://gitlabci.raiffeisen.ru/cib/api-guide/-/tree/master/spectral/rules/asyncapi
extends: [['spectral:asyncapi', off]]
rules:
  asyncapi-schema: "error"
  contact-x-short-team-name-required:
    description: "Поле info.contact.x-short-team-name является обязательным"
    documentationUrl: "https://gitlabci.raiffeisen.ru/cib/api-guide/-/tree/master/spectral/rules/asyncapi?ref_type=heads#contact-x-short-team-name-required"
    given: "$.info"
    message: "Отсутствует поле info.contact.x-short-team-name"
    severity: "error"
    then:
      field: "contact.x-short-team-name"
      function: "truthy"
  contact-x-team-id-required:
    description: "Поле info.contact.x-team-id является обязательным"
    documentationUrl: "https://gitlabci.raiffeisen.ru/cib/api-guide/-/tree/master/spectral/rules/asyncapi?ref_type=heads#contact-x-team-id-required"
    given: "$.info"
    message: "Отсутствует поле info.contact.x-team-id"
    severity: "error"
    then:
      field: "contact.x-team-id"
      function: "truthy"
  external-ref-forbidden:
    description: "Все $ref должны ссылаться на components"
    documentationUrl: "https://gitlabci.raiffeisen.ru/cib/api-guide/-/tree/master/spectral/rules/asyncapi?ref_type=heads#external-ref-forbidden"
    given: "$..$ref"
    message: "Найдена ссылка на внешний компонент {{value}}"
    resolved: false
    severity: "error"
    then:
      function: "pattern"
      functionOptions:
        match: "^#/components"
  supported-schema-version:
    description: "Спецификация должна быть версии 2+"
    documentationUrl: "https://gitlabci.raiffeisen.ru/cib/api-guide/-/tree/master/spectral/rules/asyncapi?ref_type=heads#supported-schema-version"
    given: "$"
    message: "Схема документа не равна 2+"
    severity: "error"
    then:
      - field: "asyncapi"
        function: "truthy"
      - field: "asyncapi"
        function: "pattern"
        functionOptions:
          match: "^[23]\\.\\d{1}\\.\\d{1}$"
